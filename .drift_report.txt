
> ai-contract-drift-monitor@0.1.0 drift
> tsx src/cli/drift.ts

[metrics] Drift monitor metrics registered
[2025-12-02T18:40:38.976Z] [c500d754] [INFO] [drift-check] üöÄ Starting drift check - Run ID: c500d754
[2025-12-02T18:40:38.977Z] [c500d754] [INFO] [drift-check] Checking scheduling window...
[2025-12-02T18:40:38.977Z] [c500d754] [INFO] [schedule] Schedule check passed - monitoring allowed
[2025-12-02T18:40:38.977Z] [c500d754] [INFO] [drift-check] Loading targets from /home/runner/work/ai-contract-drift-monitor/ai-contract-drift-monitor/src/infrastructure/api/config/targets.json
[2025-12-02T18:40:38.977Z] [c500d754] [INFO] [drift-check] Loaded 3 target(s)
[2025-12-02T18:40:38.977Z] [c500d754] [INFO] [drift-check] Previous snapshot: 3 target(s)
[2025-12-02T18:40:38.977Z] [c500d754] [INFO] [drift-check] Fetching fx_usd_eur...
[guardedFetch] GET https://api.frankfurter.app/currencies?from=USD&to=EUR,GBP,JPY (target: fx_usd_eur)
[guardedFetch] Headers: {"User-Agent":"ai-drift-monitor/0.1.0"}
[guardedFetch] ‚úÖ GET https://api.frankfurter.app/currencies?from=USD&to=EUR,GBP,JPY - 200 (694ms)
[2025-12-02T18:40:39.683Z] [c500d754] [INFO] [drift-check] ‚úÖ No changes in fx_usd_eur
[2025-12-02T18:40:39.683Z] [c500d754] [INFO] [drift-check] Fetching github_repo_ts...
[guardedFetch] GET https://api.github.com/repos/microsoft/TypeScript (target: github_repo_ts)
[guardedFetch] Headers: {"User-Agent":"ai-drift-monitor/0.1.0"}
[guardedFetch] ‚úÖ GET https://api.github.com/repos/microsoft/TypeScript - 200 (182ms)
[2025-12-02T18:40:40.162Z] [c500d754] [INFO] [drift-check] ‚úÖ No changes in github_repo_ts
[2025-12-02T18:40:40.162Z] [c500d754] [INFO] [drift-check] Fetching rick_morty_graphql...
[2025-12-02T18:40:40.162Z] [c500d754] [INFO] [drift-check] Using GraphQL introspection for rick_morty_graphql
[guardedFetch] POST https://rickandmortyapi.com/graphql (target: rick_morty_graphql)
[guardedFetch] Headers: {"Content-Type":"application/json","User-Agent":"ai-drift-monitor/0.1.0"}
[guardedFetch] ‚úÖ POST https://rickandmortyapi.com/graphql - 200 (286ms)
[2025-12-02T18:40:41.268Z] [c500d754] [WARN] [drift-check] Drift detected in rick_morty_graphql: +0 -1
[2025-12-02T18:40:41.268Z] [c500d754] [INFO] [drift-check] Classifying severity...
[2025-12-02T18:40:41.268Z] [c500d754] [WARN] [drift-check] üö® MAJOR BREAKING CHANGES

  ‚Ä¢ [MAJOR] rick_morty_graphql: Field 'Character.new_field_teste:string' removed (breaking change)

[2025-12-02T18:40:41.268Z] [c500d754] [INFO] [drift-check] Generating AI summary...
[2025-12-02T18:40:41.268Z] [c500d754] [INFO] [ai-summary] AI enabled - generating intelligent summary
[2025-12-02T18:40:41.269Z] [c500d754] [INFO] [ai-summary] Ground truth tokens extracted: 5 unique tokens
[2025-12-02T18:40:41.269Z] [c500d754] [INFO] [ai-summary] Sending request to AI gateway
[2025-12-02T18:40:43.606Z] [c500d754] [INFO] [ai-summary] AI summary generated and validated successfully
[2025-12-02T18:40:43.606Z] [c500d754] [INFO] [drift-check] Updating snapshot (PR-only mode)...
[2025-12-02T18:40:43.606Z] [c500d754] [INFO] [snapshot-update] Updating snapshot: /home/runner/work/ai-contract-drift-monitor/ai-contract-drift-monitor/snapshots/latest.json (mode: PR_ONLY)
[2025-12-02T18:40:43.606Z] [c500d754] [INFO] [snapshot-update] ‚úÖ Snapshot written to /home/runner/work/ai-contract-drift-monitor/ai-contract-drift-monitor/snapshots/latest.json
[2025-12-02T18:40:43.607Z] [c500d754] [INFO] [snapshot-update] ‚úÖ PR body written to /home/runner/work/ai-contract-drift-monitor/ai-contract-drift-monitor/.pr_body.md
[2025-12-02T18:40:43.607Z] [c500d754] [ERROR] [drift-check] üö® BLOCKING: MAJOR changes detected - CI will fail | {}

============================================================
üö® API Drift Detected - MAJOR

üìù Summary:
The removal of the 'new_field_teste' field of type 'string' from the 'Character' object in the 'rick_morty_graphql' schema may cause breaking changes for clients that rely on this field, potentially leading to compatibility issues and impacting the overall user experience. This change affects API consumers who have implemented logic based on the presence of 'new_field_teste'. The removal of this field could be due to various reasons such as data redundancy, security concerns, or schema optimization.

üí• Impact:

1. API consumers will encounter errors when attempting to access or manipulate the 'new_field_teste' field, which is no longer available in the 'Character' object.

2. Existing queries or mutations that include 'new_field_teste' will fail, requiring updates to remove references to this field to maintain compatibility.

3. Clients may need to adjust their data processing logic to account for the absence of 'new_field_teste', potentially affecting downstream applications or services that rely on this data.

4. The removal of 'new_field_teste' could lead to data loss if clients have been storing or utilizing this field for specific purposes, such as analytics or user profiling.

‚ö†Ô∏è Risks:

1. Breaking changes: The sudden removal of 'new_field_teste' poses a significant risk of breaking existing client implementations, which could result in service disruptions or errors.

2. Compatibility issues: The change may introduce compatibility problems for clients that have not been updated to reflect the new schema, potentially leading to versioning conflicts or difficulties in maintaining a unified API interface.

3. Data integrity: Depending on how 'new_field_teste' was used, its removal could compromise data integrity, especially if this field was critical for certain business logic or validation processes.

4. Security implications: Although the removal of a field itself may not directly introduce a security risk, it could indirectly affect security if 'new_field_teste' was used in authentication, authorization, or input validation processes.
============================================================

[2025-12-02T18:40:43.607Z] [c500d754] [INFO] [drift-check] Teams webhook not configured, skipping
[2025-12-02T18:40:43.607Z] [c500d754] [INFO] [drift-check] ‚úÖ Drift check completed in 4631ms - Exit code: 1
